<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
  	  xmlns:p="http://primefaces.org/ui">
		
		<ui:decorate template="MasterPage.xhtml">
        <ui:define name="centro">
		
		<h:head>
			<meta charset="UTF-8"/>
			<title>Manter Veículo</title>
		</h:head>
		<body>
			<h:form id="frmVeiculo">
				<p:panel header="Manter Veículo">
					<p:toolbar id="tbActions">
						<f:facet name="left">
							<p:commandButton value="Inlcuir" update=":form" oncomplete="PF('dlg1').show()" action="#{crtveiculo.create()}" icon="fa fa-plus" />
						</f:facet>
					</p:toolbar>
					<p:dataTable
						id="tbDadosveiculo"
						value="#{crtveiculo.getAll()}"
						selection="#{crtveiculo.model}"
						selectionMode="single"
						var="vVeiculo"
						rowKey="#{vVeiculo.id}">
						
						<f:facet name="header">Lista de Veículos</f:facet>
							<p:column style="width:32px;text-align: center">
								<p:commandButton  update=":form" oncomplete="PF('dlg1').show()" icon="fa fa-fw fa-edit" title="Editar">
								<f:setPropertyActionListener value="#{vVeiculo}" target="#{crtveiculo.model}"  />
							</p:commandButton>							
						</p:column>
						<!--
						<p:column>
							<f:facet name="header">Ação de usuário</f:facet>
							<h:commandButton action="PF('dlg1').show()">Botão</h:commandButton>
						</p:column>
						-->
						<p:column>
							<f:facet name="header">Marca</f:facet>
							<h:outputText value="#{vVeiculo.marca}" />
						</p:column>
						<p:column>
							<f:facet name="header">Modelo</f:facet>
							<h:outputText value="#{vVeiculo.modelo}"/>
						</p:column>
							<p:column>
							<f:facet name="header">Ano</f:facet>
							<h:outputText value="#{vVeiculo.ano}"/>
						</p:column>
							<p:column>
							<f:facet name="header">Cor</f:facet>
							<h:outputText value="#{vVeiculo.cor}"/>
						</p:column>
							<p:column>
							<f:facet name="header">Placa</f:facet>
							<h:outputText value="#{vVeiculo.placa}"/>
						</p:column>
							<p:column>
							<f:facet name="header">Lotacao</f:facet>
							<h:outputText value="#{vVeiculo.lotacao}"/>
						</p:column>
					
											
						<f:facet name="footer">
						
						</f:facet>
					</p:dataTable>
				</p:panel>
			</h:form>
			
			<!--  -->
			
			<p:dialog width="500px" height="300px" id="detailDialog"
				modal="true"
				header="Detalhe do Veiculo"
				widgetVar="dlg1"
				appendTo="@(body)">
				<h:form id="form">
					<h:panelGrid id="formDetail" columns="2">
					
						<h:outputLabel id="lblMarca" value="Marca" />
						<p:inputText
							id="txtMarca"
							label="lblMarca"
							value="#{crtveiculo.model.marca}"/>
						
						<h:outputLabel id="lblModelo" value="Modelo" />
						<p:inputText
							id="txtModelo"
							label="lblModelo"
							value="#{crtveiculo.model.modelo}"/>
							
						<h:outputLabel id="lblAno" value="Ano" />
						<p:inputText
							id="txtAno"
							label="lblAno"
							value="#{crtveiculo.model.ano}"/>
						
						<h:outputLabel id="lblCor" value="Cor" />
						<p:inputText
							id="txtCor"
							label="lblCor"
							value="#{crtveiculo.model.cor}"/>
							
						<h:outputLabel id="lblPlaca" value="Placa" />
						<p:inputText
							id="txtPlaca"
							label="lblPlaca"
							value="#{crtveiculo.model.placa}"/>
							
						<h:outputLabel id="lblLotacao" value="Lotacao" />
						<p:inputText
							id="txtLotacao"
							label="lblLotacao"
							value="#{crtveiculo.model.lotacao}"/>
												
						<f:facet name="footer">
							<p:commandButton
								value="OK"
								id="cbOK"
								action="#{crtveiculo.save()}"
								onsuccess="PF('dlg1').hide()"
								update=":frmVeiculo:tbDadosveiculo"
								/>
							<p:commandButton
								value="Cancelar"
								id="cbCancelar"
								action="#{crtveiculo.create()}"
								onsuccess="PF('dlg1').hide()"
								update=":frmVeiculo:tbDadosveiculo"/>	
						</f:facet>
					</h:panelGrid>
				</h:form>
			</p:dialog>
		</body>
		
		</ui:define>
		</ui:decorate>
		
</html>